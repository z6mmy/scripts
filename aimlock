-- Generated by Aippy Roblox GUI Designer
-- Place this script in a LocalScript inside StarterGui

local player = game.Players.LocalPlayer
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AippyGeneratedGui"
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Mobile Optimization: Add UIScale for better scaling across devices
local uiScale = Instance.new("UIScale")
uiScale.Parent = screenGui

-- Main Container for cohesive dragging
local mainContainer = Instance.new("Frame")
mainContainer.Name = "MainContainer"
mainContainer.Size = UDim2.new(1, 0, 1, 0)
mainContainer.Position = UDim2.new(0, 0, 0, 0)
mainContainer.BackgroundTransparency = 1
mainContainer.Parent = screenGui

-- Frame539818
local Frame539818 = Instance.new("Frame")
Frame539818.Name = ""
Frame539818.Size = UDim2.fromScale(0.48, 0.46)
Frame539818.Position = UDim2.fromScale(0.26, 0.23)
Frame539818.BackgroundColor3 = Color3.fromHex("#000000")
Frame539818.BackgroundTransparency = 0
Frame539818.BorderSizePixel = 1
Frame539818.Parent = mainContainer

local Frame539818Corner = Instance.new("UICorner")
Frame539818Corner.CornerRadius = UDim.new(0, 10)
Frame539818Corner.Parent = Frame539818

-- TextLabel2
local TextLabel2 = Instance.new("TextLabel")
TextLabel2.Name = "TextLabel2"
TextLabel2.Size = UDim2.fromScale(0.47, 0.09)
TextLabel2.Position = UDim2.fromScale(0.26, 0.25)
TextLabel2.BackgroundColor3 = Color3.fromHex("#000000")
TextLabel2.BackgroundTransparency = 0
TextLabel2.BorderSizePixel = 1
TextLabel2.Parent = mainContainer

local TextLabel2Corner = Instance.new("UICorner")
TextLabel2Corner.CornerRadius = UDim.new(0, 6)
TextLabel2Corner.Parent = TextLabel2

TextLabel2.Text = "z6mmyâ€™s aimlock click"
TextLabel2.TextColor3 = Color3.fromHex("#b51a00")
TextLabel2.TextSize = 14
TextLabel2.TextScaled = true -- Mobile Optimization
TextLabel2.Font = Enum.Font.FredokaOne
TextLabel2.TextStrokeTransparency = 0.79
TextLabel2.TextStrokeColor3 = Color3.fromHex("#ffffff")
-- TextButton3
local TextButton3 = Instance.new("TextButton")
TextButton3.Name = "TextButton3"
TextButton3.Size = UDim2.fromScale(0.3, 0.2)
TextButton3.Position = UDim2.fromScale(0.35, 0.45)
TextButton3.BackgroundColor3 = Color3.fromHex("#b51a00")
TextButton3.BackgroundTransparency = 0
TextButton3.BorderSizePixel = 1
TextButton3.Parent = mainContainer

TextButton3.AutoButtonColor = true
local TextButton3Corner = Instance.new("UICorner")
TextButton3Corner.CornerRadius = UDim.new(0, 8)
TextButton3Corner.Parent = TextButton3

TextButton3.Text = "load"
TextButton3.TextColor3 = Color3.fromHex("#FFFFFF")
TextButton3.TextSize = 25
TextButton3.TextScaled = true -- Mobile Optimization
TextButton3.Font = Enum.Font.FredokaOne
TextButton3.TextStrokeTransparency = 0.29
TextButton3.TextStrokeColor3 = Color3.fromHex("#000000")

TextButton3.MouseButton1Click:Connect(function()
    screenGui:Destroy()
    -- LocalScript - Place in StarterPlayer > StarterPlayerScripts
    local Players = game:GetService("Players")
    local RunService = game:GetService("RunService")
    local player = Players.LocalPlayer
    local camera = workspace.CurrentCamera
    local playerGui = player:WaitForChild("PlayerGui")
    -- Variables
    local lockedCharacter = nil
    local lockedPlayer = nil
    local espHighlight = nil
    local espGui = nil
    local isLocked = false
    -- Create ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "LockOnGui"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = playerGui
    -- Create Lock Button
    local lockButton = Instance.new("TextButton")
    lockButton.Name = "LockButton"
    lockButton.Size = UDim2.new(0, 100, 0, 50)
    lockButton.Position = UDim2.new(1, -120, 0.5, -25)
    lockButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    lockButton.Text = "LOCK"
    lockButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    lockButton.TextSize = 18
    lockButton.Font = Enum.Font.GothamBold
    lockButton.Active = true
    lockButton.Draggable = false
    lockButton.Parent = screenGui
    -- Button styling
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = lockButton
    local buttonStroke = Instance.new("UIStroke")
    buttonStroke.Color = Color3.fromRGB(255, 255, 255)
    buttonStroke.Thickness = 2
    buttonStroke.Parent = lockButton
    -- Dragging functionality (perimeter only)
    local dragging = false
    local dragStart = nil
    local startPos = nil
    lockButton.InputBegan:Connect(function(input)
    	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
    		dragging = true
    		dragStart = input.Position
    		startPos = lockButton.Position
    	end
    end)
    lockButton.InputEnded:Connect(function(input)
    	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
    		dragging = false
    	end
    end)
    local UserInputService = game:GetService("UserInputService")
    UserInputService.InputChanged:Connect(function(input)
    	if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
    		local delta = input.Position - dragStart
    		local newPos = UDim2.new(
    			startPos.X.Scale,
    			startPos.X.Offset + delta.X,
    			startPos.Y.Scale,
    			startPos.Y.Offset + delta.Y
    		)
    		-- Get screen dimensions
    		local screenSize = camera.ViewportSize
    		local buttonSize = lockButton.AbsoluteSize
    		-- Calculate absolute position
    		local absX = newPos.X.Offset
    		local absY = newPos.Y.Offset
    		-- Snap to perimeter edges
    		local edgeThreshold = 150 -- Distance from edge to snap
    		local snapDistance = 20 -- How close to edge when snapped
    		-- Check which edge is closest
    		local distToLeft = absX
    		local distToRight = screenSize.X - (absX + buttonSize.X)
    		local distToTop = absY
    		local distToBottom = screenSize.Y - (absY + buttonSize.Y)
    		local minDist = math.min(distToLeft, distToRight, distToTop, distToBottom)
    		-- Snap to the closest edge
    		if minDist == distToLeft then
    			absX = snapDistance
    		elseif minDist == distToRight then
    			absX = screenSize.X - buttonSize.X - snapDistance
    		elseif minDist == distToTop then
    			absY = snapDistance
    		elseif minDist == distToBottom then
    			absY = screenSize.Y - buttonSize.Y - snapDistance
    		end
    		-- Apply new position
    		lockButton.Position = UDim2.new(0, absX, 0, absY)
    	end
    end)
    -- Function to create ESP on character
    local function createESP(character, targetPlayer)
    	removeESP()
    	local rootPart = character:FindFirstChild("HumanoidRootPart")
    	if not rootPart then 
    		print("No HumanoidRootPart found")
    		return 
    	end
    	-- Create Highlight with green glow outline
    	espHighlight = Instance.new("Highlight")
    	espHighlight.Name = "LockESP"
    	espHighlight.Adornee = character
    	espHighlight.FillColor = Color3.fromRGB(0, 255, 0)
    	espHighlight.FillTransparency = 0.8
    	espHighlight.OutlineColor = Color3.fromRGB(0, 255, 0)
    	espHighlight.OutlineTransparency = 0.3
    	espHighlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    	espHighlight.Parent = screenGui
    	print("Highlight created for: " .. targetPlayer.Name)
    	-- Create BillboardGui for username
    	espGui = Instance.new("BillboardGui")
    	espGui.Name = "LockESPGui"
    	espGui.Adornee = rootPart
    	espGui.Size = UDim2.new(0, 200, 0, 50)
    	espGui.StudsOffset = Vector3.new(0, 3, 0)
    	espGui.AlwaysOnTop = true
    	espGui.Parent = screenGui
    	-- Create username label
    	local espLabel = Instance.new("TextLabel")
    	espLabel.Size = UDim2.new(1, 0, 1, 0)
    	espLabel.BackgroundTransparency = 1
    	espLabel.Text = targetPlayer.Name
    	espLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    	espLabel.TextSize = 20
    	espLabel.Font = Enum.Font.GothamBold
    	espLabel.TextStrokeTransparency = 0
    	espLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    	espLabel.Parent = espGui
    	print("ESP created successfully")
    end
    -- Function to remove ESP
    local function removeESP()
    	if espHighlight then
    		espHighlight:Destroy()
    		espHighlight = nil
    	end
    	if espGui then
    		espGui:Destroy()
    		espGui = nil
    	end
    end
    -- Function to get closest character to screen center
    local function getClosestCharacterToCenter()
    	local centerX = camera.ViewportSize.X / 2
    	local centerY = camera.ViewportSize.Y / 2
    	local closestDistance = math.huge
    	local closestCharacter = nil
    	local closestPlayer = nil
    	for _, targetPlayer in pairs(Players:GetPlayers()) do
    		if targetPlayer ~= player and targetPlayer.Character then
    			local character = targetPlayer.Character
    			local humanoid = character:FindFirstChild("Humanoid")
    			local rootPart = character:FindFirstChild("HumanoidRootPart")
    			if humanoid and humanoid.Health > 0 and rootPart then
    				local screenPos, onScreen = camera:WorldToScreenPoint(rootPart.Position)
    				if onScreen and screenPos.Z > 0 then
    					local distance = math.sqrt((screenPos.X - centerX)^2 + (screenPos.Y - centerY)^2)
    					if distance < closestDistance then
    						closestDistance = distance
    						closestCharacter = character
    						closestPlayer = targetPlayer
    					end
    				end
    			end
    		end
    	end
    	return closestCharacter, closestPlayer
    end
    -- Function to check if locked character is dead/knocked
    local function isCharacterDead(character)
    	if not character or not character.Parent then
    		return true
    	end
    	local humanoid = character:FindFirstChild("Humanoid")
    	if not humanoid or humanoid.Health <= 0 then
    		return true
    	end
    	return false
    end
    -- Function to unlock
    local function unlock()
    	isLocked = false
    	lockedCharacter = nil
    	lockedPlayer = nil
    	lockButton.Text = "LOCK"
    	lockButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    	buttonStroke.Color = Color3.fromRGB(255, 255, 255)
    	removeESP()
    end
    -- Button click handler
    lockButton.MouseButton1Click:Connect(function()
    	if not isLocked then
    		-- Try to lock on closest character
    		local targetChar, targetPlayer = getClosestCharacterToCenter()
    		if targetChar and targetPlayer then
    			isLocked = true
    			lockedCharacter = targetChar
    			lockedPlayer = targetPlayer
    			lockButton.Text = "UNLOCK"
    			lockButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
    			buttonStroke.Color = Color3.fromRGB(0, 255, 0)
    			createESP(targetChar, targetPlayer)
    			print("Locked onto: " .. targetPlayer.Name)
    		else
    			print("No valid target found")
    		end
    	else
    		-- Unlock
    		print("Unlocked")
    		unlock()
    	end
    end)
    -- Main camera lock loop
    RunService.RenderStepped:Connect(function()
    	if isLocked and lockedCharacter and lockedPlayer then
    		-- Check if character is dead/knocked
    		if isCharacterDead(lockedCharacter) then
    			print("Target died, unlocking")
    			unlock()
    			return
    		end
    		local rootPart = lockedCharacter:FindFirstChild("HumanoidRootPart")
    		local head = lockedCharacter:FindFirstChild("Head")
    		local myCharacter = player.Character
    		local myRootPart = myCharacter and myCharacter:FindFirstChild("HumanoidRootPart")
    		local myHumanoid = myCharacter and myCharacter:FindFirstChild("Humanoid")
    		if rootPart and head and myRootPart and myHumanoid then
    			-- Make YOUR character face the locked target
    			local targetPos = rootPart.Position
    			local myPos = myRootPart.Position
    			local lookDirection = (targetPos - myPos).Unit
    			-- Rotate your character to face the target (Y-axis only)
    			local newCFrame = CFrame.new(myPos, Vector3.new(targetPos.X, myPos.Y, targetPos.Z))
    			myRootPart.CFrame = newCFrame
    			-- Position camera behind and above your character
    			local offset = Vector3.new(0, 2, 6)
    			local cameraCFrame = CFrame.new(myPos + offset)
    			-- Make camera look at the locked target's head
    			camera.CFrame = CFrame.new(cameraCFrame.Position, head.Position)
    		else
    			unlock()
    		end
    	end
    end)
end)

-- TextLabel4
local TextLabel4 = Instance.new("TextLabel")
TextLabel4.Name = "TextLabel4"
TextLabel4.Size = UDim2.fromScale(0.4, 0.07)
TextLabel4.Position = UDim2.fromScale(0.29, 0.34)
TextLabel4.BackgroundColor3 = Color3.fromHex("#000000")
TextLabel4.BackgroundTransparency = 0
TextLabel4.BorderSizePixel = 1
TextLabel4.Parent = mainContainer

TextLabel4.Text = "load to enable script"
TextLabel4.TextColor3 = Color3.fromHex("#b51a00")
TextLabel4.TextSize = 14
TextLabel4.TextScaled = true -- Mobile Optimization
TextLabel4.Font = Enum.Font.FredokaOne
TextLabel4.TextStrokeTransparency = 0.79
TextLabel4.TextStrokeColor3 = Color3.fromHex("#ffffff")
